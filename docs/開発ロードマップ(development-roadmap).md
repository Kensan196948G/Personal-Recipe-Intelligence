# Personal Recipe Intelligence 開発ロードマップ

**作成日**: 2025-12-19
**分析結果に基づく開発計画**

---

## 現在の品質スコア

| 領域 | スコア | 主要課題 |
|------|--------|----------|
| バックエンド | 6.8/10 | 外部API堅牢性、テストカバレッジ定量化 |
| フロントエンド | 5.2/10 | アクセシビリティ、UX機能 |
| テスト | 7/10 | E2Eテスト不足、カバレッジ30% |
| スクリプト/CI | 4/10 | Windowsサポート、CI統合 |

---

## フェーズ 1: 即時対応（完了）

### 実施済み項目

| 項目 | 状態 | 説明 |
|------|------|------|
| Windows用スクリプト | 完了 | setup.ps1, dev.ps1, test.ps1 |
| ファイルアップロード制限 | 完了 | OCR API に10MB制限追加 |
| ConfirmModalコンポーネント | 完了 | confirm()をアクセシブルなモーダルに置換 |

---

## フェーズ 2: 短期対応（1-2週間目標）

### 2.1 フロントエンド品質改善

| タスク | 優先度 | 影響範囲 |
|--------|--------|----------|
| グローバルCSS変数導入 | 高 | 全コンポーネント |
| キーボードナビゲーション強化 | 高 | フォーム、リスト |
| URLルーティング（SPA化） | 高 | App.svelte |
| 成功/警告メッセージUI | 中 | 全画面 |
| ローディング状態の改善 | 中 | API呼び出し全般 |

### 2.2 バックエンド堅牢性

| タスク | 優先度 | 影響範囲 |
|--------|--------|----------|
| 外部API呼び出しにリトライロジック追加 | 高 | external_recipe_service, translation |
| タイムアウト設定統一 | 高 | 全外部呼び出し |
| ログマスキング監査 | 中 | 全APIエンドポイント |
| エラーレスポンス詳細化 | 中 | 全APIエンドポイント |

### 2.3 テスト強化

| タスク | 優先度 | 目標 |
|--------|--------|------|
| coverage.py導入・設定 | 高 | カバレッジ可視化 |
| E2Eテスト拡充 | 高 | 6 → 15テスト |
| コンポーネントテスト追加 | 中 | 主要コンポーネント |
| API統合テスト拡充 | 中 | エラーケース網羅 |

### 2.4 CI/CD改善

| タスク | 優先度 | 説明 |
|--------|--------|------|
| Python バージョン統一 | 高 | 3.11に統一 |
| カバレッジ閾値強制 | 高 | 30% → 60% |
| E2E CI有効化 | 中 | 自動実行設定 |
| 重複ワークフロー整理 | 中 | ci.yml, test.yml統合 |

---

## フェーズ 3: 中期対応（3-4週間目標）

### 3.1 機能拡張

| 機能 | 説明 | 優先度 |
|------|------|--------|
| ソート機能 | 作成日、更新日、調理時間順 | 高 |
| バッチ操作 | 複数選択削除、一括タグ付け | 中 |
| エクスポート機能 | JSON/CSV形式 | 中 |
| 画像ギャラリー | レシピ画像表示 | 低 |

### 3.2 パフォーマンス最適化

| 項目 | 説明 | 優先度 |
|------|------|--------|
| API キャッシング戦略 | フロントエンドキャッシュ+TTL | 高 |
| 仮想スクロール | 大量レシピ対応 | 中 |
| インクリメンタル検索 | デバウンス付き検索 | 中 |

### 3.3 スタブ実装の完成

| サービス | 現状 | 対応 |
|----------|------|------|
| Spoonacular連携 | スタブ | API実装 |
| DeepL翻訳強化 | 基本実装 | エラーハンドリング強化 |
| YouTube字幕抽出 | 部分実装 | タイムアウト・リトライ追加 |

---

## フェーズ 4: 長期対応（1-2ヶ月目標）

### 4.1 高度な機能

| 機能 | 説明 |
|------|------|
| 材料逆引き検索 | 手持ち材料からレシピ提案 |
| レシピ推薦AI | 類似レシピ検索 |
| 多言語対応 | UI国際化 |
| ダークモード | テーマ切り替え |

### 4.2 運用品質

| 項目 | 説明 |
|------|------|
| 監視・アラート | エラー率監視 |
| バックアップ自動化 | 定期バックアップ |
| ドキュメント整備 | API仕様書更新 |

---

## 次の開発ステップ（推奨順序）

### ステップ 1: フロントエンド基盤整備
```
1. グローバルCSS変数ファイル作成 (variables.css)
2. URLルーティング導入 (svelte-spa-router or hash-based)
3. キーボードナビゲーションテスト
```

### ステップ 2: テスト基盤強化
```
1. coverage.py設定・CI統合
2. E2Eテスト追加（削除、編集、エラー表示）
3. カバレッジ閾値を60%に引き上げ
```

### ステップ 3: バックエンド堅牢化
```
1. httpx/requestsにリトライデコレータ追加
2. タイムアウト設定を環境変数化
3. ログマスキング監査・修正
```

### ステップ 4: CI/CD最適化
```
1. test.ymlをci.ymlに統合
2. Pythonバージョン3.11固定
3. E2Eテスト自動実行有効化
```

---

## KPI目標

| 指標 | 現状 | 短期目標 | 中期目標 |
|------|------|----------|----------|
| テストカバレッジ | ~30% | 50% | 60% |
| E2Eテスト数 | 6 | 15 | 25 |
| アクセシビリティスコア | 3/10 | 6/10 | 8/10 |
| バックエンド品質 | 6.8/10 | 7.5/10 | 8.5/10 |
| フロントエンド品質 | 5.2/10 | 7/10 | 8/10 |

---

## 技術的負債リスト

| 項目 | リスク | 対応時期 |
|------|--------|----------|
| Argon2未インストール（テストスキップ） | 低 | フェーズ3 |
| 外部APIタイムアウト未設定 | 中 | フェーズ2 |
| confirm()使用（解決済み） | - | 完了 |
| CI重複ワークフロー | 低 | フェーズ2 |
| Windowsスクリプト不足 | 中 | 継続対応 |

---

## 参考リンク

- [CLAUDE.md](../CLAUDE.md) - 開発ルール
- [E2Eテストガイド](07_テスト(testing)/E2Eテストガイド(e2e-testing-guide).md)
- [TEST_COVERAGE_SUMMARY.md](../backend/tests/TEST_COVERAGE_SUMMARY.md)
