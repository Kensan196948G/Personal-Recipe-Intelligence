[pytest]
# Pytest configuration for Personal Recipe Intelligence

# Test discovery patterns
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Test paths
testpaths =
  backend/tests
  tests

# Minimum version
minversion = 7.0

# Add current directory to Python path
pythonpath = . backend

# Coverage configuration
addopts =
  --verbose
  --strict-markers
  --tb=short
  --cov=backend
  --cov=src
  --cov-report=term-missing
  --cov-report=html:coverage_html
  --cov-report=xml:coverage.xml
  --cov-fail-under=0
  -ra

# Markers for test categorization
markers =
  unit: Unit tests
  integration: Integration tests
  slow: Tests that take significant time
  api: API endpoint tests
  scraper: Web scraping tests
  translation: Translation service tests
  crud: CRUD operation tests
  db: Database tests

# Warning filters
filterwarnings =
  error
  ignore::UserWarning
  ignore::DeprecationWarning
  ignore::PendingDeprecationWarning

# Coverage options
[coverage:run]
source = backend,src
omit =
  */tests/*
  */test_*.py
  */__pycache__/*
  */venv/*
  */node_modules/*

[coverage:report]
precision = 2
show_missing = True
skip_covered = False

exclude_lines =
  pragma: no cover
  def __repr__
  raise AssertionError
  raise NotImplementedError
  if __name__ == .__main__.:
  if TYPE_CHECKING:
  @abstractmethod

[coverage:html]
directory = coverage_html
